<Controls:MetroWindow x:Class="Safety_Wheel.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Safety_Wheel"
        xmlns:Controls="http://metro.mahapps.com/winfx/xaml/controls"
        mc:Ignorable="d"
        Title="Безопасное колесо" 
        WindowState="Maximized"
        WindowTitleBrush="{StaticResource DarkBlue}"
        GlowBrush="DarkBlue"
        BorderBrush="{StaticResource DarkBlue}">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="80"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" 
                Background="#FFD9D9D9"
                VerticalAlignment="Top"
                Height="80">
            <Border.Effect>
                <DropShadowEffect 
                    ShadowDepth="3"
                    BlurRadius="10"
                    Opacity="0.3"
                    Color="Black"/>
            </Border.Effect>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock x:Name="HeaderUserNameTextBlock" 
                          Grid.Column="0"
                          Foreground="#FF052D6E"
                          FontSize="48"
                          FontWeight="Bold"
                          VerticalAlignment="Center"
                           HorizontalAlignment="Left"
                          Margin="80,0,0,0"/>

                <StackPanel Grid.Column="1" 
                            Height="80"
                           Orientation="Horizontal"
                           VerticalAlignment="Center"
                           HorizontalAlignment="Right"
                           Background="{StaticResource DarkBlue}">

                    <Image x:Name="BackImage" 
                          Source="pack://application:,,,/Images/back_logo.png"
                          Width="60" 
                          Height="60"
                          Margin="30,0,15,0"
                          Cursor="Hand"
                           MouseDown="BackImage_MouseDown"/>

                    <Image x:Name="ExitImage" 
                          Source="pack://application:,,,/Images/exit_logo.png"
                          Width="60" 
                          Height="60"
                          Cursor="Hand"
                           Margin="15,0,30,0"
                          MouseDown="ExitImage_MouseDown"/>
                          
                </StackPanel>
            </Grid>
        </Border>

        <Frame x:Name="MainFrame" 
               Grid.Row="1"
               NavigationUIVisibility="Hidden"
               HorizontalAlignment="Stretch"
           VerticalAlignment="Stretch"
               Source="Pages/Student/AuthorizationPage.xaml"/>
    </Grid>

    <Controls:MetroWindow.Flyouts>
        <Controls:FlyoutsControl>

            <Controls:Flyout x:Name="TeacherManagerFlyout"
                        Header="Управление учениками"
                        Position="Right"
                        Width="450"
                        IsOpen="False"
                        IsPinned="True"
                             Background="{StaticResource MainBlue}"
                             IsOpenChanged="TeacherManagerFlyout_IsOpenChanged">

                <Grid Margin="15">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Button Style="{StaticResource MiniMiniHomeButton}" Content="Добавить" Click="AddStudent_Click"/>
                        <Button Style="{StaticResource MiniMiniHomeButton}" Content="Сохранить" Click="SaveStudent_Click" Margin="10,0"/>
                        <Button Style="{StaticResource MiniMiniHomeButton}" Content="Удалить" Click="DeleteStudent_Click"/>
                    </StackPanel>

                    <StackPanel Grid.Row="1" Margin="0,0,0,10">
                        <TextBlock Text="Имя"/>
                        <TextBox x:Name="NameTextBox"/>

                        <TextBlock Text="Логин" Margin="0,5,0,0"/>
                        <TextBox x:Name="LoginTextBox"/>

                        <TextBlock Text="Логин" Margin="0,5,0,0"/>
                        <TextBox x:Name="PasswordTextBox"/>
                    </StackPanel>

                    <DataGrid x:Name="StudentsGrid"
                              Grid.Row="2"
                              IsReadOnly="True"
                              SelectionMode="Single"
                              SelectionUnit="FullRow"
                              AutoGenerateColumns="False"
                              SelectionChanged="StudentsGrid_SelectionChanged">

                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Имя Фамилия" Binding="{Binding Name}" />
                            <DataGridTextColumn Header="Логин" Binding="{Binding Login}" />
                            <DataGridTextColumn Header="Пароль" Binding="{Binding Password}" />
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>

            </Controls:Flyout>

            <Controls:Flyout x:Name="FilterMonthFlyout"
                 Header="Фильтр по месяцу"
                 Position="Right"
                 Width="300"
                 IsPinned="True"
                 Background="{StaticResource MainBlue}">

                <StackPanel Margin="20">

                    <TextBlock Text="Год"
                   Margin="0,0,0,5"/>

                    <TextBox x:Name="YearTextBox"
                 Height="40"
                 PreviewTextInput="YearTextBox_PreviewTextInput"/>

                    <TextBlock Text="Месяц"
                   Margin="0,15,0,5"/>

                    <ComboBox x:Name="MonthComboBox"
          Height="30"
          DisplayMemberPath="Name"
          SelectedValuePath="Number"
          SelectionChanged="MonthComboBox_SelectionChanged"/>


                    <Button Content="Применить"
        Margin="0,20,0,0"
        Height="35"
        Command="{Binding ApplyMonthFilterCommand}" />

                    <Button Content="Сбросить"
        Margin="0,10,0,0"
        Height="30"
        Command="{Binding ResetMonthFilterCommand}" />

                </StackPanel>
            </Controls:Flyout>


        </Controls:FlyoutsControl>
    </Controls:MetroWindow.Flyouts>
</Controls:MetroWindow>